<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>06_箭头函数</title>

</head>
<body>
    <button id="btn1">测试箭头函数this_1</button>
    <button id="btn2">测试箭头函数this_2</button>


<!--
* 作用: 定义匿名函数
* 基本语法:
  * 没有参数: () => console.log('xxxx')
  * 一个参数: i => i+2
  * 大于一个参数: (i,j) => i+j
  * 函数体不用大括号: 默认返回结果
  * 函数体如果有多个语句, 需要用{}包围，若有需要返回的内容，需要手动返回
* 使用场景: 多用来定义回调函数

* 箭头函数的特点：
    1、简洁
    2、箭头函数没有自己的this，箭头函数的this不是调用的时候决定的，而是在定义的时候处在的对象就是它的this
    3、扩展理解： 箭头函数的this看外层的是否有函数，
        如果有，外层函数的this就是内部箭头函数的this，
        如果没有，则this是window。
-->
<script type="text/javascript">
  /*
    创建函数的方式：
      函数表达式
      函数声明
   */
  /*function fn1() {  //函数声明

  }
  let fn2 = function () {  //函数表达式

  }*/
  let fn3 = () => {  //为了省略function

  }
  //没有传参，并且语句只有一条
  let fn4 = () => console.log('hello');
  console.log(fn4());
  //有一个参数，并且语句只有一条
  let fn5 = x => x;
  console.log(fn5(123));
  /*//两个参数和两个以上，并且语句只有一条
  let fn6 = (x, y) => console.log(x, y);
  fn6(123, 456);
  //多条语句
  let fn7 = (x, y) => {
    let result = x + y;
    console.log(result);
  }
  fn7(123, 456);

  let fn8 = () => console.log(this);  //window
  fn8();
  /!*
    箭头函数的this看外层的是否有函数，
        如果有，外层函数的this就是内部箭头函数的this，
        如果没有，则this是window。
   *!/
  let obj = {};
  function foo1() {
    let fn9 = () => console.log(this);  //window
    fn9();
  }
  foo1();

  function foo2() {
    let fn9 = () => console.log(this);  //obj
    fn9();
  }
  foo2.call(obj);
  /!*
    箭头函数是静态的，和它在哪定义有关，和它在哪调用没有关系
   *!/
  let fn10 = () => console.log(this); //window
  function foo3() {
    fn10();
  }
  foo3.call(obj);

  let fn11 = () => {
    console.log(this);  //window
    let fn12 = function () {
      console.log(this);  //obj
      let fn13 = () => {
        console.log(this);  //obj
        let fn14 = () => {
          console.log(this);  //obj
        }
        fn14();
      }
        fn13.call(window)
    }
    fn12.call(obj);
  }
  fn11()

  let obj1 = {
    sayName (name) {
      let fn = () => {
        console.log(this);  //obj1
        console.log(name);
      }
      fn();
    }
  }
  obj1.sayName('bob');*/

  /*var flag = true
  /!*if (flag) {
    console.log(flag);
  }*!/
  if (!flag) console.log(flag);
  else if (flag) console.log(flag);*/
</script>

</body>
</html>