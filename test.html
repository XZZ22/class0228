<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>async</title>
</head>
<body>
<h1 id="title"></h1>
<p id="content"></p>
<ul id="list"></ul>
<script type="text/javascript" src="./ES5_6_7/study/es6/常用/js/jquery-1.10.1.min.js"></script>
<script>
  const $title =$('#title');
  const $content = $('#content');
  const $list = $('#list');

  function getNews(url){
    return new Promise(resolve=>{
      $.get(url,data=>resolve(data))
    })
  }
  async function test(){
    let result = await getNews('http://localhost:3000/news?id=1');
    $title.html(result.title);
    $content.html(result.content);
    let url = `http://localhost:3000${result.commentsUrl}`;
    result = await getNews(url);
    let html = '';
    result.forEach(item=>html += `<li>${item.content}</li>`);
    $list.html(html)
  }
  test();


</script>
</body>
</html>